{% load random_numbers %}

{% block videos %}
    <script>

        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var video = [];


        function ready(id) {
            video[id] = new YT.Player($('iframe').get(id));
        }

        function pause(id) {
            video[id].pauseVideo();
        }


    </script>

    <style>
        .image:hover {
            color: #afc2d3;
        }

        .modal-content {
            background-color: #f5f5f7;
        }
    </style>

    {% for video in videos %}
        {% if video.id|modulo:4 == 0 %}
            <div class="row">
        {% endif %}

    <div class="col-md-3 col-xs-3 col-sm-3">

        <img src="{{ video.image }}" class="img-responsive image" data-toggle="modal" data-target="#{{ video.id }}"
             style="width: auto; height: 200px; border: solid">
        <p style=" margin: 0 !important; padding: 0 !important;">
            <span style="color: #5D337F; font-size: 0.8em">{{ video.title }}</span>
        </p>
        <p style="font-size: 15px;font-family: initial;"><span
                style="color: blue">Duration: </span> {{ video.duration }}
        </p>
        <div class="modal fade" id="{{ video.id }}" role="dialog" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 style="font-weight: bold;font-family: -webkit-body;">{{ video.title }}</h4>

                        <button type="button" class="close" data-dismiss="modal"><i
                                class="fa fa-times-circle" onclick="pause({{ video.id }})"></i>
                        </button>

                    </div>
                    <div class="modal-body">
                        <iframe src="{{ video.embed }}?enablejsapi=1" id="vid{{ video.id }}" class="youtube-iframe"
                                width="100%" height="530px"
                                style="padding: 10px;"
                                allowfullscreen onload="ready({{ video.id }})">
                        </iframe>
                        <br>
                        <div class="content" style="flex-direction: column;">
                            <br>
                            <p style="font-family: arial;font-size: 15px;">

                                -{{ video.description }}

                            </p>
                            <p style="font-size: 15px;font-family: initial;"><span
                                    style="color: blue"> Published At:</span> {{ video.date }} <span
                                    style="font-size: 15px;margin-left:10px;font-family: initial;"><span
                                    style="color: blue"> Time: </span>{{ video.time }}</span></p>
                        </div>

                    </div>

                </div>

            </div>
        </div>
    </div>
    {% if video.id|modulo:4 == 3 or video.id|add:'+1' == videos|length %}
        </div>
        <hr>
    {% endif %}
    {% endfor %}
    <div>
    <form id='formv' action="{% url 'query' %}" method="POST">{% csrf_token %}
        <input hidden name="token" value="{{ query }}&{{ next_page }}&{{ videos|length }}">
        <input type="submit" id="more"style="background-color: #00897b; margin-right: 0px; font-size: 17px; color:  white; height: 38px; width: 80px; border-radius: 15px;" value="More..">
    </form>
    </div>
    <script>
    $(document).ready(function () {
        if(!{{ vid_amount }} || '{{ next_page }}' == 'None'){
            $("#more").hide();
        }
    })
    </script>
{% endblock %}
